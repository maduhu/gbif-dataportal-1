<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE struts PUBLIC
    "-//Apache Software Foundation//DTD Struts Configuration 2.0//EN"
    "http://struts.apache.org/dtds/struts-2.0.dtd">
<struts>

    <package name="default" namespace="/" extends="struts-default">
        <result-types>
            <result-type name="freemarker" class="org.apache.struts2.views.freemarker.FreemarkerResult" default="true"/>
        </result-types>

        <interceptors>
            <interceptor name="requireLogin" class="org.gbif.portal.struts.RequireLoginInterceptor"/>
            <!-- see http://struts.apache.org/2.1.6/docs/interceptors.html -->
            <interceptor-stack name="loginStack">
                <interceptor-ref name="requireLogin"/>
                <interceptor-ref name="i18nStack"/>
            </interceptor-stack>
            <interceptor-stack name="uploadStack">
                <interceptor-ref name="fileUpload">
                    <!-- the same setting also has to be applied in struts.properties !!! -->
                    <param name="maximumSize">2097152</param>
                </interceptor-ref>
                <interceptor-ref name="i18nStack"/>
            </interceptor-stack>

        </interceptors>
      <!--
        <default-interceptor-ref name="i18nStack"/>
      -->

        <global-results>
            <result name="404">
                <param name="location">/WEB-INF/error/404.ftl</param>
            </result>
            <result name="401">
                <param name="location">/WEB-INF/error/401.ftl</param>
            </result>
            <result name="loginRequired">
                <param name="location">/WEB-INF/error/loginRequired.ftl</param>
            </result>
            <result name="error">
                <param name="location">/WEB-INF/error/error.ftl</param>
            </result>
            <result name="notImplemented">
                <param name="location">/WEB-INF/error/notImplemented.ftl</param>
            </result>

        </global-results>
    </package>


    <package name="root" namespace="/" extends="default">
      <default-action-ref name="home"/>

      <action name="home" class="org.gbif.portal.action.HomeAction">
        <result>/WEB-INF/pages/home.ftl</result>
      </action>
    </package>



  <package name="dataset" namespace="/dataset" extends="default">
    <!-- catches everything that doesnt match below! -->
    <default-action-ref name="home"/>

    <action name="home" class="org.gbif.portal.action.dataset.HomeAction">
      <result>/WEB-INF/pages/dataset/home.ftl</result>
    </action>

    <action name="search" class="org.gbif.portal.action.dataset.SearchAction">
      <result>/WEB-INF/pages/dataset/search.ftl</result>
    </action>

    <!-- {id} matches anything but "/" -->
    <action name="{id}/activity" class="org.gbif.portal.action.dataset.ActivityAction">
      <result>/WEB-INF/pages/dataset/activity.ftl</result>
    </action>

    <action name="{id}/stats" class="org.gbif.portal.action.dataset.StatsAction">
      <result>/WEB-INF/pages/dataset/stats.ftl</result>
    </action>

    <action name="{id}/discussion" class="org.gbif.portal.action.dataset.DiscussionAction">
      <result>/WEB-INF/pages/dataset/discussion.ftl</result>
    </action>

    <action name="{id}" class="org.gbif.portal.action.dataset.DetailAction">
      <result>/WEB-INF/pages/dataset/detail.ftl</result>
    </action>

  </package>


  <package name="species" namespace="/species" extends="default">
    <default-action-ref name="home"/>

    <action name="home" class="org.gbif.portal.action.species.HomeAction">
      <result>/WEB-INF/pages/species/home.ftl</result>
    </action>

    <action name="search" class="org.gbif.portal.action.species.SearchAction">
      <result>/WEB-INF/pages/species/search.ftl</result>
    </action>

    <action name="{id}/activity" class="org.gbif.portal.action.species.ActivityAction">
      <result>/WEB-INF/pages/species/activity.ftl</result>
    </action>

    <action name="{id}/stats" class="org.gbif.portal.action.species.StatsAction">
      <result>/WEB-INF/pages/species/stats.ftl</result>
    </action>

    <action name="{id}/discussion" class="org.gbif.portal.action.species.DiscussionAction">
      <result>/WEB-INF/pages/species/discussion.ftl</result>
    </action>

    <action name="{id}" class="org.gbif.portal.action.species.DetailAction">
      <result>/WEB-INF/pages/species/detail.ftl</result>
    </action>

  </package>

</struts>
